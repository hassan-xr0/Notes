![[Pasted Image 20250826030001_478.png]]

> Layer-3 header can be IPv4 or IPv6 header

![[Pasted image 20250826033631.png]]

## Version field 
- length 4 bits
- identifies the version of IP
- IPv4 = 4 (0100)
- IPv6 = 6 (0110)
## Internet Header Length( IHL )

- Length 4 bits
- Identify the full length of header in 4-byte increment 
- **Example :** if value is 5 = 5 x 4 = 20 bytes
- Minimum value = 5 
- Max value 15 (15 x 20 = 60-bytes) because if all 4 bits are 1 then it become 15[^1]
- MIN LENGTH OF IPv4 HEADER = 20 bytes
- MAX LENGTH OF IPv4 HEADER = 60 bytes

## DSCP field 
- Stands for *Differential Service Code Point*
- Lengths = 6 bits
- Used for QoS (Quality of Service) 
- Used to prioritize delay sensitive data 
- Means prioritize data that cannot be delay like streaming video or voice 

> [!NOTE] 
> We will learn about QoS in future 
## ECN Field
- 2 bits
- It stands for Explicit Congestion Notification
- Usually when  Router is congested (crowded,queue is full) the sender detects loss meaning sender face reduce speed
- In Normal words with ECN router tell the sender about congestion tell him to slow down requests  
## Total Length Field
- 16 bits
- It tell the Total size of packet including Layer 4 Segment 
- Total size of packet = L4-Header + Segment
- Measured in bytes (not 4-increment byte like IHL )meaning in this value 20 means 20 byte
- MIN VALUE = 20(only IPv4 Header no segment)
- MAX VALUE = 65535 (all 16 bits are 1 )[^2]
## Identification Field
- 16 bits
- If a packet is to large then it is divided into fragments. This field identifies which fragment belongs to which packet by giving them ID
- All fragment of same packet have their own IPv4 header with same value(same ID) in this field
- Packet are fragmented when they are larger than MTU(Maximum Transmission Unit) which 1500 byte same as Ethernet Frame [[CS/CCNA 200-301/5-6.Ethernet LAN Switchinh.md#^UvY4sHss|payload-size]]
- These Fragment are reassemble by the receiver host
## Flags
- 3 bits
- It tell the router when to fragment and when to not
- DF = 1 → Don’t Fragment the packet    
- MF = 1 → This is not the last fragment, expect more.
- MF = 0 → I’m the last fragment of this packet.
- Unfragmented packet will always have MF = 0
## Fragment Offset Field
- 13 bits
- It tell the position of fragment within the the original packet
- So if the fragments are not in order receiver can  reassemble them easily
## Time To Live (TTL)
- 8 bits 
- It means how much time the packet should be alive (hopped for m router to router) 
- Recommended default value is 64 TTL
- When a packet is going in a loop in network it make it slow so everytime the goes form a router it reduces its TTL by 1
- When TTL is zero packet is dead (dropped)
## Protocols
- The Protocol field tells the receiver what’s inside the IP packet (the payload).
- Basically: “Hey, the data I’m carrying belongs to this Layer 4 protocol 
- It lets the receiving system know whether to pass the data up to **TCP, UDP, ICMP, or something else**.
## Header Checksum
- 16 bits
- When router receives packet it calculate the checksum of header and compare it with one in this field if it does not match then it means there error so it dropped the packet
- Only check error for IPv4 Header not whole encapsulated Data
## Source/Destination Address
- 32 bits
- As name suggest it tells the source and destination IP
## Options
- Rarely uses 
- 0 - 320 bits
- If IHL is greater than 5 It mean that Option are present
- IHL > 5 = Options
# References

[^1]: ![[Pasted image 20250826035433.png]]

[^2]: ![[Pasted image 20250831183043.png]]
